@section AddToHead{
    <link href="@Url.Content("~/Content/Libraries/morris.css")" rel="stylesheet" type="text/css" />
}
@model PPI.Core.Web.Models.DashboardViewModel
@{
    Layout = "~/Views/Shared/_LayoutAdmin.cshtml";
}
@if (ViewData["EventList"] != null)
{

    <div class="row" style="padding-bottom:10px; min-width:1200px;">
        <div class="col-md-6">
            <div class="groupdashboardbtns">
                <a href="@Url.Action("GetParticipantsByEvent", "AMSAParticipants", new { eventId = Model.eventId })" class="btn btn-primary btn200">
                    <i class="fa fa-users fa-lg mr5"></i> People
                </a>
                <a href="@Url.Action("Send", "AMSAEmails", new { eventId = Model.eventId })" class="btn btn-primary btn200">
                    <i class="fa fa-mail-reply-all fa-lg mr5"></i> Send Emails
                </a>
                
            </div>
            <div class="groupdashboardbtns">
                <a href="@Url.Action("GetParticipantsByEvent", "Reports", new { eventId = Model.eventId })" class="btn btn-primary btn200">
                    <i class="fa fa-book fa-lg mr5"></i> Get Reports
                </a>
                <a href="@Url.Action("UploadAMSADataFeedByEvent", "Reports", new { eventId = Model.eventId })" class="btn btn-primary btn200">
                    <i class="fa fa-upload fa-lg mr5"></i> Upload Data Feed
                </a>
            </div>
        </div>
        @using (Html.BeginForm("AMSADashboardSendSwitch", "Administration"))
        {
            <div class="form-group text-right" style="padding-bottom:10px;">

                <label for="eventFilter" class="col-md-1 control-label bold">Events</label>
                <div class="col-md-4">
                    <div class="form-group pull-left">
                        @Html.DropDownList("SelectedProgramSiteEventId", (SelectList)ViewData["EventList"], new { @class = "form-control", onchange = "this.form.submit();" })
                    </div>
                </div>
            </div>
        }
    </div>
    if (Model.eventId != -1)
    {
        <div class="row">
            <div class="col-lg-6">
                <div class="main-box small-graph-box emerald-bg" style="cursor:pointer;" id="AssessmentsComplete">
                    <span class="value">@Model.AssessmentComplete.NumberCompleted of @Model.AssessmentComplete.TotalNumber</span>
                    <span class="headline">Assessments Completed</span>
                    <div class="progress">
                        <div class="progress-bar" role="progressbar" aria-valuenow="@Model.AssessmentComplete.NumberCompleted" aria-valuemin="0" aria-valuemax="@Model.AssessmentComplete.TotalNumber" style="width: @Model.AssessmentComplete.PercentComplete%;">
                        </div>
                    </div>
                    <span class="subinfo">
                        <i class="fa fa-calendar"></i> as of @Model.AssessmentNotComplete.AsOfDate.ToShortDateString()
                    </span>
                </div>
                <div class="main-box small-graph-box yellow-bg" id="AssessmentsUncomplete" style="cursor:pointer;">
                    <span class="value">@Model.AssessmentNotComplete.NumberCompleted of @Model.AssessmentNotComplete.TotalNumber</span>
                    <span class="headline">Assessments Incomplete</span>
                    <div class="progress">
                        <div class="progress-bar" role="progressbar" aria-valuenow="@Model.AssessmentNotComplete.NumberCompleted" aria-valuemin="0" aria-valuemax="@Model.AssessmentNotComplete.TotalNumber" style="width: @Model.AssessmentNotComplete.PercentComplete%;">
                        </div>
                    </div>
                    <span class="subinfo">
                        <i class="fa fa-calendar"></i> as of @Model.AssessmentNotComplete.AsOfDate.ToShortDateString()
                    </span>
                </div>
            </div>
            <div class="col-lg-6">
                <div class="main-box infographic-box">
                    <i class="fa fa-user red-bg"></i>
                    <!--<span class="headline">As Of @Model.AsOfDate.ToShortDateString() </span>            -->
                    <span class="headline">Today Completed</span>
                    <span class="value">@Model.AssessmentsToday</span>
                </div>
                <div class="main-box infographic-box">
                    <i class="fa fa-archive emerald-bg"></i>
                    <!--<span class="headline">As Of @Model.AsOfDate.ToShortDateString() </span>     -->
                    <span class="headline">Invitations</span>
                    <span class="value">@Model.InvitationsTotal</span>
                    <span class="headline">Reminders</span>
                    <span class="value">@Model.RemindersTotal</span>
                </div>
            </div>
        </div>

        <div>
            <!--PopUP-->
            <div tabindex="-1" class="modal fade" id="openpreview" role="dialog" aria-hidden="true" aria-labelledby="openpreviewLabel" style="display: none;">
                <div class="modal-dialog">

                    <div class="modal-content modal-lg">
                        <div class="modal-header">
                            <button class="close" aria-hidden="true" type="button" data-dismiss="modal">×</button>
                            <h4><strong>Assessments</strong></h4>
                        </div>
                        <div class="modal-body">
                            <div id="replaceme" class="main-box-body clearfix">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!--end PopUp -->
        </div>
    }
    else
    {
        <div class="jumbotron">
            <div class="row">
                <table>
                    <tr>
                        <td valign="top" width="400"><img src="@Url.Content("~/Content/Images/amsa.png")" /></td>
                        <td valign="top">
                            <h1>Welcome to J3Personica </h1>
                            <hr />
                            <h2>AMSA Report Dashboard</h2>
                            <div class="profile-label mt20">
                                <div class="alert alert-info ml20">
                                    <i class="fa fa-check-circle fa-fw fa-lg"></i>
                                    <strong>GET STARTED!</strong>  Simply select an Event from the dropdown above.
                                </div>
                            </div>
                        </td>
                    </tr>
                </table>
            </div>
        </div>
    }
    @section Scripts
{
        <script src="~/Scripts/Plugin/jquery.knob.js"></script>
        <script src="~/Scripts/Plugin/raphael-min.js"></script>
        <script src="~/Scripts/Plugin/morris.min.js"></script>

        <script>

    $("#AssessmentsUncomplete").click(function () {
        $.ajax({
            url: "/Administration/AMSAAssessmentsUncompleted?eventId=@Model.eventId",
            cache: false,
            type: 'get',
            data: null,
            success: function (response) {
                $('#replaceme').html(response);
                $('#openpreview').modal('show');
            },
            error: function (error) {
                console.log("error" + JSON.stringify(error));
            }
            
        });
    });

    $("#AssessmentsComplete").click(function () {
        $.ajax({
            url: "/Administration/AMSAAssessmentsCompleted?eventId=@Model.eventId",
            cache: false,
            type: 'get',
            data: null,
            success: function (response) {
                $('#replaceme').html(response);
                $('#openpreview').modal('show');
            }
        });
    });


        </script>
    }

}