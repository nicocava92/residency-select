@model PPI.Core.Web.Models.AmsaReports.ViewModel.ParticipantListViewModel

@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_LayoutAdmin.cshtml";
}

<div class="main-box clearfix">
    <div class="main-box-body">

        <div class="row">
            <div class="col-lg-6 col-md-6 col-sm-12">
                <h2>AMSA Participants</h2>
            </div>
            <div class="col-lg-3 col-md-3 col-sm-12" style="margin-top:20px;">
                <a href="@Url.Action("Upload","AMSAParticipants")" class="btn btn-primary btn-block">
                    <i class="fa fa-upload fa-lg"></i> Upload Participants
                </a>
            </div>
            <div class="col-lg-3 col-md-3 col-sm-12" style="margin-top:20px;">
                <a href="@Url.Action("Create","AMSAParticipants")" class="btn btn-primary btn-block">
                    <i class="fa fa-plus-circle fa-lg"></i> Add Participants
                </a>
            </div>
        </div>
    <br/>
        <div class="row">
            <div class="col-lg-5 col-md-5 col-sm-12 col-xs-12">
                <strong>Search:</strong>
                @using (Html.BeginForm("GetParticipantsBySearch", "AMSAParticipants"))
                {
                            @Html.AntiForgeryToken()
                        
                            @Html.EditorFor(m=>m.Search, null, new { htmlAttributes = new { @class = "form-control", @placeholder = "Search Last Name, Email, AAMC, or AMSACode", @ID = "searchsubmit" } }  )
                     
                    <button class="btn btn-primary" style="margin-top:10px;" onclick="this.form.submit();">Search</button>
                }
            </div>
            <div class="col-lg-6 col-lg-offset-1 col-md-offset-1 col-sm-12 col-xs-12">
                <strong>Events:</strong><br>
                @using (Html.BeginForm("GetParticipantsByEvent","AMSAParticipants"))
                {
                    @Html.AntiForgeryToken()
                    @Html.DropDownListFor(model => model.idSelectedEvent, Model.Events, new { @class = "form-control", @onChange = "this.form.submit();", @Id = "selectEvent" })
                    @Html.ValidationMessage("FilterByEvent")
                }
            </div>
        </div>
            
        <br />
        <div>
            <table class="table table-responsive table-striped">
                <tr>
                    <th>
                        Title
                    </th>
                    <th>
                        First Name
                    </th>
                    <th>
                        Last Name
                    </th>
                    <th>
                        Gender
                    </th>
                    <th>
                        ID Number / AAMC Number
                    </th>
                    <th>
                        Primary E-mail
                    </th>
                    <th>
                        Status
                    </th>
                    <th>
                        Survey Type
                    </th>
                    
                    <th style="word-wrap:break-word; max-width:80px;">
                        AMSA Code
                    </th>
                    <th></th>
                </tr>

                @foreach (PPI.Core.Web.Models.AmsaReports.AMSAParticipant item in Model.LstParticipants)
                {
                    <tr>
                        <td>
                            @Html.DisplayFor(modelItem => item.Title)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.FirstName)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.LastName)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.Gender)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.AAMCNumber)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.PrimaryEmail)
                        </td>
                        <td>
                            @*Show different colors depending on the status of the participant*@
                            @if (item.Status.ToUpper().Equals("INVITED"))
                            {
                                <label class="label-warning label label-large txt-white" style="width:100px;display:block ">Invited</label>
                            }
                            else if (item.Status.ToUpper().Equals("NEW"))
                            {
                                <label class="label-warning label label-large txt-white" style="width:100px;display:block ">New</label>
                            }
                            else if (item.Status.ToUpper().Equals("COMPLETED"))
                            {
                                <label class="label-success label label-large txt-white" style="width:100px;display:block ">Completed</label>
                                }
                            else if (item.Status.ToUpper().Equals("INPROGRESS"))
                            {
                                <label class="label-primary label label-large txt-white" style="width:100px;display:block ">In Progress</label>
                            }
                            else
                            {
                                <label class="label-primary label label-large txt-white" style="width:100px;display:block ">@item.Status</label>
                            }
                        </td>
                        <td>
                            @try {
                            @item.getSurveyType()
                            }
                            catch
                            {
                                <text>No event to show here</text>
                            }
                        </td>
                       
                        <td style="word-wrap:break-word; max-width:80px;">
                            @Html.DisplayFor(modelItem => item.AMSACode)
                        </td>
                        <td style="min-width:200px;">
                            <a href="@Url.Action("Edit", new { id = item.Id })" class="btn btn-default btn-xs">
                                Edit
                            </a>
                            <a href="@Url.Action("Profile", new { id=item.Id })" class="btn btn-primary btn-xs">
                                Profile
                            </a>
                            <a href="@Url.Action("Delete", new { id=item.Id })" class="btn btn-danger btn-xs" onclick="return confirm('Are you sure you wish to delete?');">
                                Delete
                            </a>
                        </td>
                    </tr>
                }

            </table>
        </div>
        </div></div>

